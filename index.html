<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="별과 땅의 이야기 - 천상열차분야지도와 한국의 전설을 연결하는 인터랙티브 체험">
    <title>별과 땅의 이야기 (Stories of Stars and the Land)</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="styles_map.css">
</head>
<body>
    <!-- Entry Transition Overlay -->
    <div id="entry-transition" class="transition-overlay">
        <div class="transition-text">이제, 하늘의 이야기가 땅으로 내려옵니다.</div>
    </div>

    <!-- Main Container -->
    <main role="main" aria-label="별과 땅의 이야기 - 인터랙티브 지도">

        <!-- Title Section -->
        <header class="title-zone">
            <h1 class="main-title">별과 땅의 이야기</h1>
            <p class="subtitle">하늘의 별이 땅의 이야기로 이어진다</p>
        </header>

        <!-- Main Canvas -->
        <section class="main-canvas" role="region" aria-label="한반도 지도">

            <!-- Background Stars -->
            <div class="background-stars" aria-hidden="true"></div>

            <!-- Korean Map Container (SVG will be loaded here) -->
            <div id="mapContainer" class="map-container korea-map-container" role="application" aria-label="대한민국 지역 지도">
                <div class="loading">지도를 불러오는 중...</div>
            </div>

            <!-- Constellation Overlay -->
            <svg class="constellation-overlay" viewBox="0 0 1000 1200" aria-hidden="true">
                <defs>
                    <!-- Star glow effect -->
                    <filter id="starGlow">
                        <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                        <feMerge>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>

                    <!-- Animated star sparkle -->
                    <radialGradient id="starSparkle">
                        <stop offset="0%" style="stop-color:white;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:white;stop-opacity:0" />
                    </radialGradient>
                </defs>
                <!-- Constellations will be dynamically drawn -->
            </svg>

            <!-- Light Beams Container -->
            <div class="light-beams-container" aria-hidden="true"></div>
        </section>

        <!-- Progress Zone -->
        <aside class="progress-zone" role="status" aria-live="polite">
            <div class="progress-orbs">
                <!-- Progress orbs will be dynamically generated -->
            </div>
            <p class="progress-text">지도에서 지역을 선택하세요</p>
        </aside>

        <!-- Story Modal -->
        <div id="story-modal" class="story-modal" role="dialog" aria-modal="true" aria-labelledby="story-title" style="display: none;">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <button class="modal-close" aria-label="이야기 닫기">✕</button>

                <div class="constellation-animation-container">
                    <!-- Constellation SVG in modal -->
                    <svg class="constellation-svg" viewBox="0 0 300 200" aria-hidden="true">
                        <defs>
                            <filter id="modalStarGlow">
                                <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                <feMerge>
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        <!-- Constellation will be drawn here -->
                    </svg>
                </div>

                <div class="story-content">
                    <div class="region-symbol" aria-hidden="true"></div>
                    <h2 id="story-title" class="story-title"></h2>
                    <h3 class="story-subtitle"></h3>

                    <div class="story-text"></div>

                    <div class="audio-player">
                        <button class="audio-control" aria-label="음성 해설 재생/일시정지" aria-pressed="false">
                            <span class="audio-icon">🔊</span>
                            <span class="audio-label">음성 해설 듣기</span>
                        </button>
                        <div class="audio-progress">
                            <div class="audio-progress-bar"></div>
                        </div>
                        <div class="audio-time">0:00</div>
                    </div>

                    <button class="next-story-btn">다른 하늘 이야기 보기 ▶</button>
                </div>
            </div>
        </div>

        <!-- Completion Overlay -->
        <div id="completion-overlay" class="completion-overlay" style="display: none;">
            <div class="completion-sky" aria-hidden="true"></div>
            <div class="completion-content">
                <h2 class="completion-title">모든 별은, 우리 땅의 이야기였습니다.</h2>
                <p class="completion-subtitle">우리의 하늘과 땅, 그 별빛은 아직도 이어지고 있습니다.</p>
                <button class="return-btn">처음으로 돌아가기 ▶</button>
            </div>
        </div>

    </main>

    <!-- Tooltip -->
    <div id="tooltip" class="tooltip" role="tooltip" aria-hidden="true"></div>

    <!-- Audio Elements (hidden) -->
    <!--
    <audio id="ambient-wind" loop preload="auto">
        <source src="assets/audio/ambient/night_wind_loop.mp3" type="audio/mpeg">
    </audio>
    <audio id="hover-sound" preload="auto">
        <source src="assets/audio/interaction/hover_shimmer.mp3" type="audio/mpeg">
    </audio>
    <audio id="click-sound" preload="auto">
        <source src="assets/audio/interaction/click_ting.mp3" type="audio/mpeg">
    </audio>
    <audio id="narration-audio" preload="none">
        <source will be set dynamically>
    </audio>
    <audio id="completion-music" preload="auto">
        <source src="assets/audio/completion/orchestral_swell.mp3" type="audio/mpeg">
    </audio>
    -->

    <!-- Scripts -->
    <script src="script.js"></script>
</body>
</html>
